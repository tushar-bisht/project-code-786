pipeline {
  agent any
  stages {
    stage("Deploy node app") {
      steps{
        withCredentials([sshUserPrivateKey(credentialsId: 'node-app', keyFileVariable: 'identity', passphraseVariable: '', usernameVariable: 'ubuntu')]) {
          sh  'ls -alh'
          sh 'ssh ubuntu@192.168.2.213 -oStrictHostKeyChecking=no docker stop nodeapp; docker pull 776487083560.dkr.ecr.us-east-1.amazonaws.com/project-code-786:${BUILD_NUMBER}'

}
}
}

}
}
